<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parte 3 — Trasformando con Fourier - Matephis</title>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Noto+Sans+Math&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="icon" type="image/svg+xml" href="assets/icons/logo.svg">
    
    <!-- Highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>

    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
    <div class="container wide">
        <header>
            <div class="breadcrumb"><a href="index.html">Torna alla Home</a></div>
            <h1><span class="part-label">Parte 3</span> Trasformando con Fourier</h1>
        </header>

        <div class="page-layout">
            <main>
                <h2 id="coefficienti">Sempre più coefficienti!</h2>
                <p>Il nostro obiettivo è rappresentare un disegno qualsiasi (realizzato a mano libera e formato da un'unica linea chiusa e continua) attraverso una <strong>serie di Fourier</strong>, ovvero una concatenazione infinita di punti rotanti. Per ragioni tecniche e pratiche, troncheremo la serie di Fourier e concateneremo solamente un numero finito di punti — utilizzeremo, ovvero, un polinomio trigonometrico. Per poter ricostruire il disegno tramite una serie di Fourier è necessario determinare i relativi coefficienti di Fourier, che si calcolano applicando <strong>la trasformata di Fourier</strong> al disegno di partenza.</p>

                <p>Create una copia della tela p5.js su cui avete implementato la visualizzazione dei polinomi trigonometrici (vedi <a href="intro-p5.html">Parte 2 — In cammino con p5.js!</a>).</p>

                <ol>
                    <li>Tramite l'applicazione drawxy.matephis.com, create un disegno a piacere. Nella sezione <em>DFT Analysis</em> copiate i corrispondenti valori di <code>v</code>, <code>R</code> e <code>phi</code> (che sono stati calcolati tramite una trasformata di Fourier) e incollateli nell'editor. Selezionate il maggior numero possibile di coefficienti di Fourier.</li>
                    <li>Adattate il codice in modo da visualizzare il polinomio trigonometrico definito da <code>v</code>, <code>R</code> e <code>phi</code>. <em><strong>Suggerimento:</strong></em> come centro di rotazione si usa il punto di coordinate \((R_0 \cos(\varphi_0), R_0 \sin(\varphi_0))\).</li>
                </ol>

                <p>Si può controllare il numero di coefficienti utilizzati direttamente all'interno della nostra applicazione web tramite uno slider.</p>

                <ol start="3">
                    <li>Create uno slider di nome <code>slider</code> che vari da \(0.1\) a \(100\) (cercate nella documentazione come crearlo).</li>
                    <li>Concatenate i punti rotanti solo se è rispettata la condizione che segue (che va riportata nel ciclo <em>for</em> tramite cui è rappresentata la concatenazione di punti rotanti). Qual è il suo significato?</li>
                </ol>

    <pre><code>// ciclo for per visualizzare la concatenazione di punti rotanti
    const maxSpeed = (slider.value() / 100) * N;
    if (Math.abs(v[i]) < maxSpeed + 1) {
    	// concatenazione dei punti
    }</code></pre>

                <ol start="5">
                    <li>Fate variare il valore dello slider e verificate come cambia la precisione dell'approssimazione del disegno fornita dal polinomio trigonometrico.</li>
                </ol>

                <a href="https://editor.p5js.org/bradwave.mb/sketches/mX4Th-OmZ" class="segnavia-box" target="_blank">
                    <span class="material-symbols-outlined segnavia-icon">hiking</span>
                    <div class="segnavia-content">
                        <strong>Hai smarrito il sentiero?</strong>
                        <span class="segnavia-action">Ecco un segnavia</span>
                    </div>
                </a>


                <h2 id="ingranaggio">Dentro l'ingranaggio</h2>
                <p>Cerchiamo ora di capire come funziona l'applicazione drawxy.matephis.com, implementando noi stessi la trasformata di Fourier.</p>
                <p>La procedura generale da seguire è la seguente:</p>
                <ul>
                    <li>partiamo dalle coordinate <code>drawingX</code> e <code>drawingY</code> di una particolare figura;</li>
                    <li>applichiamo la funzione <code>dft(drawingX, drawingY)</code>, ovvero la <strong>trasformata discreta di Fourier (DFT)</strong>, che restituisce tre vettori <code>v</code>, <code>R</code> e <code>phi</code> (i coefficienti di Fourier).</li>
                    <li>Utilizzando i coefficienti di Fourier, rappresentiamo il disegno tramite una concatenazione di punti rotanti con velocità angolare <code>v</code>, raggio di rotazione <code>R</code> e fase <code>phi</code>.</li>
                </ul>

                <p>Create una copia della tela p5.js (dopo aver salvato la precedente), di dimensioni 600x600 (almeno).</p>

                <ol>
                    <li>Salvate (in fondo al codice) le <strong>coordinate del disegno</strong> nelle variabili <code>drawingX</code> e <code>drawingY</code>, quindi rappresentate la figura. <strong>Cosa si ottiene?</strong></li>
                    <li>Incollate nell'editor il seguente blocco di codice.</li>
                </ol>

    <pre><code>/* Calcola la trasformata discreta di Fourier */
    function dft(drawingX, drawingY) {
    	const v = [];
    	const R = [];
    	const phi = [];
    	
    	const N = drawingX.length;
    	
    	for (let f = 0; f < N; f++) {
    		let sum = { re: 0, im: 0 };
    		
    		for (let m = 0; m < N; m++) {
    			const phi = -2 * Math.PI * (m / N) * f;
    			const c = multiply(
    				{ re: Math.cos(phi), im: Math.sin(phi) },
    				{ re: drawingX[m], im: drawingY[m] }
    			);
    			sum = {
    				re: sum.re + c.re / N,
    				im: sum.im + c.im / N,
    			};
    		}
    		
    		if (f <= N /2 ) {
    			v.push(f);
    		} else {
    			v.push(-(N - f));
    		}
    		R.push(Math.sqrt(sum.re ** 2 + sum.im ** 2));
    		phi.push(Math.atan2(sum.im, sum.re));
    	}
    	
    	return { v, R, phi };
    }
    
    /* Moltiplica due numeri complessi */
    function multiply(x, y) {
      return {
        re: x.re * y.re - x.im * y.im,
        im: x.re * y.im + x.im * y.re
      }
    }</code></pre>

                <ol start="3">
                    <li>Create i vettori vuoti <code>v</code>, <code>R</code> e <code>phi</code>. Quindi, in <code>setup()</code>, applicate la DFT alle coordinate del disegno e salvate il valore dei coefficienti di Fourier ottenuti (<code>{v, R, phi} = dft(drawingX, drawingY);</code>).</li>
                    <li>Visualizzate il polinomio trigonometrico definito da <code>v</code>, <code>R</code> e <code>phi</code> e, utilizzando lo slider precedentemente creato, fate variare il numero di coefficienti utilizzati.</li>
                </ol>

                <a href="https://editor.p5js.org/bradwave.mb/sketches/MhKowFNuU" class="segnavia-box" target="_blank">
                    <span class="material-symbols-outlined segnavia-icon">hiking</span>
                    <div class="segnavia-content">
                        <strong>Avete smarrito il sentiero?</strong>
                        <span class="segnavia-action">Ecco un segnavia</span>
                    </div>
                </a>
            </main>
            
            <aside class="sidebar">
                <nav class="sidebar-nav">
                    <h4><span class="material-symbols-outlined">article</span> Indice</h4>
                    <ul>
                        <li><a href="index.html"><span class="material-symbols-outlined">home</span> Home</a></li>
                        <li><a href="intro-desmos.html"><span class="part-label">Parte 1</span> Primi passi con Desmos</a></li>
                        <li><a href="intro-p5.html"><span class="part-label">Parte 2</span> In cammino con p5.js!</a></li>
                        <li><a href="trasformando-con-fourier.html" class="current"><span class="part-label">Parte 3</span> Trasformando con Fourier</a></li>
                        <li><a href="fourier-mano-libera.html"><span class="part-label">Parte 4</span> Fourier a mano libera</a></li>
                    </ul>
                </nav>
                <nav class="sidebar-toc">
                    <h4><span class="material-symbols-outlined">toc</span> In questa attività</h4>
                    <ul>
                        <li><a href="#coefficienti">Sempre più coefficienti!</a></li>
                        <li><a href="#ingranaggio">Dentro l'ingranaggio</a></li>
                    </ul>
                </nav>
            </aside>
        </div>
        
        <footer>
            <p>Dobbiamo sapere, sapremo.</p>
            <cite>David Hilbert</cite>
        </footer>
        <script src="assets/js/copy-code.js"></script>
        <script src="assets/js/scrollspy.js"></script>
    </div>
</body>
</html>
